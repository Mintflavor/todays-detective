# π”’ ν”„λ΅μ νΈ: μ¤ν¬μΌλ¬ λ°©μ§€ μ„λ²„ μ‚¬μ΄λ“ μ•„ν‚¤ν…μ² μ „ν™ κ³„ν (Project Anti-Spoiler) [μ™„λ£]

## 1. κ°μ” (Overview)
ν΄λΌμ΄μ–ΈνΈκ°€ μ‚¬κ±΄μ μ •λ‹µ(λ²”μΈ, νΈλ¦­)μ„ μ§μ ‘ μμ‹ ν•μ§€ μ•λ„λ΅ μ•„ν‚¤ν…μ²λ¥Ό κ°νΈν•μ—¬ λ³΄μ•μ„±μ„ κ°•ν™”ν–μµλ‹λ‹¤.

**μƒνƒ:** β… μ•„ν‚¤ν…μ² μ „ν™ μ™„λ£ (2025-12-10)

## 2. λ©ν‘ (Goals)
1.  **λ°μ΄ν„° μ€λ‹‰:** ν΄λΌμ΄μ–ΈνΈλ” `scenarioId`μ™€ κ³µκ°λ κ°μ”λ§ μμ‹ ν•λ©°, μ •λ‹µ λ°μ΄ν„°λ” μ„λ²„(DB)μ—λ§ μ΅΄μ¬.
2.  **κ²μ„ λ΅μ§ μ΄κ΄€:** μ‹¬λ¬Έ λ° ν‰κ°€ λ΅μ§μ„ Next.js API Routesμ—μ„ μ²λ¦¬.
3.  **ν¬λ…ν• κ²½ν— μ μ§€:** μ‚¬μ©μ κ²½ν— λ³€κ²½ μ—†μ.

## 3. κµ¬ν„λ μ•„ν‚¤ν…μ² (Architecture)

### λ°μ΄ν„° νλ¦„
*   **Client:** μƒμ„± μ”μ²­ -> **Next.js API** -> Gemini -> **Python Backend(DB μ €μ¥)** -> Client (`scenarioId`, `intro` λ°μ΄ν„°λ§ μμ‹ ).
*   **Interrogation:** Client (`scenarioId`, `question`) -> **Next.js API** (DB μ΅°ν: μ •λ‹µ ν¬ν•¨) -> Gemini (System Prompt: μ •λ‹µ κΈ°λ°) -> Client (λ‹µλ³€).
*   **Evaluation:** Client (`scenarioId`, `deduction`) -> **Next.js API** (DB μ΅°ν: μ •λ‹µ λΉ„κµ) -> Gemini (μ±„μ ) -> Client (κ²°κ³Ό).

## 4. μƒμ„Έ κµ¬ν„ κ²°κ³Ό (Implementation Results)

### Next.js API Routes (Server-Side Logic)
*   `app/api/game/start/route.ts`: μ‚¬κ±΄ μƒμ„±, λ°±μ—”λ“ μ €μ¥, λ―Όκ° λ°μ΄ν„° μ κ±° ν›„ λ°ν™. β…
*   `app/api/game/chat/route.ts`: DBμ—μ„ μ „μ²΄ λ°μ΄ν„°λ¥Ό μ΅°νν•μ—¬ μ©μμ νλ¥΄μ†λ‚ λ° μ•λ¦¬λ°”μ΄ ν”„λ΅¬ν”„νΈ μ΅°λ¦½. β…
*   `app/api/game/evaluate/route.ts`: DBμ—μ„ μ •λ‹µμ„ μ΅°νν•μ—¬ μ‚¬μ©μ μ¶”λ¦¬ μ±„μ . β…

### Client Hook Update
*   `app/hooks/useGeminiClient.ts`: μƒλ΅μ΄ λ³΄μ• API μ—”λ“ν¬μΈνΈ(`/api/game/*`)λ¥Ό νΈμ¶ν•λ„λ΅ μ „λ©΄ μμ •. β…

### Environment Configuration
*   `NEXT_PUBLIC_API_URL`μ„ ν†µν•΄ λ°±μ—”λ“(Python)μ™€μ ν†µμ‹  μ£Όμ† κ΄€λ¦¬. β…

## 5. κ²°λ΅ 
λ³Έ κ³„νμ— λ”°λ¥Έ λ¨λ“  λ³΄μ• μ•„ν‚¤ν…μ² λ³€κ²½ μ‚¬ν•­μ΄ μ μ©λμ—μΌλ©°, μ΄μ  ν΄λΌμ΄μ–ΈνΈ λΈλΌμ°μ €μ—μ„ κ°λ°μ λ„κµ¬λ¥Ό μ—΄μ–΄λ„ λ²”μΈμ΄λ‚ νΈλ¦­μ„ λ―Έλ¦¬ μ• μ μ—†μµλ‹λ‹¤.